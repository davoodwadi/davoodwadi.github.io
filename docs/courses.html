<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Davood Wadi - MATH60629A - Machine Learning I (Fall 2023)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Davood Wadi</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-courses" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Courses</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-courses">    
        <li>
    <a class="dropdown-item" href="https://professional.mit.edu/course-catalog/applied-data-science-program-leveraging-ai-effective-decision-making" rel="" target="">
 <span class="dropdown-text">MIT ADSP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./courses.html" rel="" target="">
 <span class="dropdown-text">MATH60629A</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#course-information" id="toc-course-information" class="nav-link active" data-scroll-target="#course-information">Course Information</a>
  <ul>
  <li><a href="#contact-information" id="toc-contact-information" class="nav-link" data-scroll-target="#contact-information">Contact Information</a></li>
  <li><a href="#bibliographic-sources" id="toc-bibliographic-sources" class="nav-link" data-scroll-target="#bibliographic-sources">Bibliographic Sources</a></li>
  <li><a href="#class-information" id="toc-class-information" class="nav-link" data-scroll-target="#class-information">Class Information</a></li>
  </ul></li>
  <li><a href="#evaluations" id="toc-evaluations" class="nav-link" data-scroll-target="#evaluations">Evaluations</a>
  <ul>
  <li><a href="#homework-20" id="toc-homework-20" class="nav-link" data-scroll-target="#homework-20">Homework (20%)</a></li>
  <li><a href="#project-30" id="toc-project-30" class="nav-link" data-scroll-target="#project-30">Project (30%)</a>
  <ul class="collapse">
  <li><a href="#timeline" id="toc-timeline" class="nav-link" data-scroll-target="#timeline">Timeline</a></li>
  </ul></li>
  <li><a href="#project-presentation-10" id="toc-project-presentation-10" class="nav-link" data-scroll-target="#project-presentation-10">Project Presentation (10%)</a></li>
  <li><a href="#final-exam-30" id="toc-final-exam-30" class="nav-link" data-scroll-target="#final-exam-30">Final Exam (30%)</a></li>
  <li><a href="#capsule-quizzes-10" id="toc-capsule-quizzes-10" class="nav-link" data-scroll-target="#capsule-quizzes-10">Capsule Quizzes (10%)</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">MATH60629A - Machine Learning I (Fall 2023)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="course-information" class="level2">
<h2 class="anchored" data-anchor-id="course-information">Course Information</h2>
<p><a href="./sessions.html">Session Materials</a></p>
<section id="contact-information" class="level3">
<h3 class="anchored" data-anchor-id="contact-information">Contact Information</h3>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<ul>
<li><strong>Davood Wadi</strong>
<ul>
<li>Part-time Faculty Lecturer</li>
<li><a href="mailto:davood.wadi@hec.ca" class="email">davood.wadi@hec.ca</a></li>
</ul></li>
<li><strong>Val√©rie Boucher</strong>
<ul>
<li>Assistant to Academic Activities</li>
<li><a href="mailto:valerie.boucher@hec.ca" class="email">valerie.boucher@hec.ca</a></li>
<li>514-340-5670</li>
<li>Office: 4.632</li>
<li>Availability:
<ul>
<li>Monday to Friday</li>
<li>8:30 a.m. to 12 p.m. and 1 to 4:00 p.m.</li>
</ul></li>
</ul></li>
<li><strong>Antonietta Florio</strong>
<ul>
<li>Assistant to Academic Activities</li>
<li><a href="mailto:antonietta.florio@hec.ca" class="email">antonietta.florio@hec.ca</a></li>
<li>514-340-6473</li>
<li>Office: 4.632</li>
<li>Availability:
<ul>
<li>From Monday to Friday</li>
<li>From 8 am to 12 pm and from 1 pm to 4:30 pm</li>
</ul></li>
</ul></li>
<li><strong>Jennifer Caron</strong>
<ul>
<li>Executive Assistant</li>
<li><a href="mailto:jennifer.caron@hec.ca" class="email">jennifer.caron@hec.ca</a></li>
<li>514-340-6473</li>
<li>Office: 4.632</li>
<li>Availability:
<ul>
<li>From Monday to Friday</li>
<li>From 8 am to 12 pm and from 1 pm to 4:30 pm</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
</section>
<section id="bibliographic-sources" class="level3">
<h3 class="anchored" data-anchor-id="bibliographic-sources">Bibliographic Sources</h3>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<ul>
<li>The Elements of Statistical Learning: Data Mining, Inference, and Prediction
<ul>
<li><a href="https://web.stanford.edu/~hastie/Papers/ESLII.pdf">Available online</a></li>
</ul></li>
<li>Goodfellow, Ian . Deep learning , MIT Press ISBN: 9780262035613
<ul>
<li><a href="https://www.deeplearningbook.org">Available online</a></li>
</ul></li>
<li>Richard S. Sutton, Andrew G. Barto. A Bradford Book (2017 (in progress)). Reinforcement Learning: An Introduction Hardcover, 2nd edition ed., The MIT Press
<ul>
<li><a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;ved=0ahUKEwjAx8CEmsLbAhUFjlkKHd3hBnQQFggpMAE&amp;url=http%3A%2F%2Fincompleteideas.net%2Fbook%2Fbookdraft2017nov5.pdf&amp;usg=AOvVaw00kFmqVbFSdkU3PTkJMJrO">Available online</a></li>
</ul></li>
<li>Murphy, Kevin (2012). Machine Learning: A Probabilistic Perspective, MIT Press ISBN: 9780262018029
<ul>
<li>Available at the library</li>
</ul></li>
<li>Ricci, Francesco. Recommender systems handbook, Springer ISBN: 148997637X
<ul>
<li>Available at the library</li>
</ul></li>
<li>Parsian, Mahmoud (2015). Data algorithms: recipes for scaling up with Hadoop and Spark, O‚ÄôReilly Media ISBN: 9781491906156
<ul>
<li>Available at the library</li>
</ul></li>
<li>McKinney, Wes. Python for data analysis: data wrangling with Pandas, NumPy, and IPython, O‚ÄôReilly Media
<ul>
<li>Available at the library</li>
</ul></li>
<li>Bishop, Christopher (2006). Pattern Recognition and Machine Learning, Springer-Verlag New York ISBN: 9780387310732
<ul>
<li>Available at the library</li>
</ul></li>
<li>Leskovec, Jurij. Mining of massive datasets, Cambridge University Press
<ul>
<li>Available at the library</li>
</ul></li>
<li>Grus, Joel. Data science from scratch, O‚ÄôReilly Media
<ul>
<li>Available at the library</li>
</ul></li>
<li>Sandy Ryza, Uri Laserson, Sean Owen, Josh Wills (2017). Advanced analytics with Spark: patterns from learning from data at scale, 2nd edition ed., O‚ÄôReilly Media
<ul>
<li>Available at the library</li>
</ul></li>
</ul>
</div>
</div>
</div>
</section>
<section id="class-information" class="level3">
<h3 class="anchored" data-anchor-id="class-information">Class Information</h3>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<ul>
<li>Location
<ul>
<li>Building C-Ste-Cath, Room Groupe Cholette</li>
</ul></li>
<li>Time
<ul>
<li>Tuesdays, 3:30 PM - 6:30 PM EDT</li>
</ul></li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="evaluations" class="level2">
<h2 class="anchored" data-anchor-id="evaluations">Evaluations</h2>
<section id="homework-20" class="level3">
<h3 class="anchored" data-anchor-id="homework-20">Homework (20%)</h3>
<ul>
<li><p>Due on 24 October 2023</p></li>
<li><p>Homework assignments are counted for 20% of your final grade.</p></li>
<li><p>The homework should be done in jupyter notebook <a href="./MATH60629A_Homework.html">here</a> or Google Colab <a href="https://colab.research.google.com/github/davoodwadi/MATH60629A.A2023-MACHINE-LEARNING-I/blob/main/MATH60629A_Homework.ipynb">here</a>.</p></li>
<li><p><strong>Instructions</strong>:</p>
<ul>
<li>The homework is due by 11:59PM EST on the due date.</li>
<li>Please upload a PDF version of your assignment on ZoneCours and insert the shareable link to your notebook in the same interface.</li>
<li>Homeworks must be completed individually.
<ul>
<li>Discussion with others is okay, but you must write solutions yourself.</li>
</ul></li>
<li>All code used to arrive at answers is submitted along with answers.</li>
<li><strong>Notes:</strong>
<ul>
<li>Please provide your code answers in the code block under each question and verbal answers in text boxes assigned in the notebook (where applicable).</li>
<li>Please run the notebook before the submission so that the outputs are displayed.</li>
<li>Please make sure that your results are reproducible. You may use random seeds from <code>random</code> and <code>numpy</code> packages. For <code>scikit-learn</code> modules, you may use the <code>random_state</code> argument.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="project-30" class="level3">
<h3 class="anchored" data-anchor-id="project-30">Project (30%)</h3>
<p>The aim of this project is to allow you to learn about machine learning by trying to solve a task with it.</p>
<p>First, select a question that can be answered using machine learning. I expect that your question will be about a model/algorithm or about an application. Then design a study that will try to answer your question. Your study must have an element of novelty. For example the novelty could be an extension or a variation of an existing algorithm or results of an existing method on a new dataset.</p>
<p>Your study should involve reading and understanding some background material. Your study must involve running some experiments. You are free to use (or not) any of the tools or models we have seen in class.</p>
<p><strong>Study plan</strong>: <em>(1 upload per group)</em> Please submit a one-page summary of your proposed research question and study to ZoneCours. I will meet with each group to discuss study plans during the lecture on Week 9. I will send you a schedule the day before. We will probably only have about 15 minutes so please make sure that your study plan is clear and precise. You may also include questions that you would like us to discuss at the end of the document.</p>
<p><strong>The group report</strong>: <em>(1 upload per group)</em> Your report must contain a description of the question you are trying to answer, a clear description of the model/algorithm you are studying, a survey of related work which proper references, an empirical section that reports your results, and a conclusion that summarizes your findings and (if pertinent) highlights possible future directions of investigation. Your report should be no longer than 10 pages in length (plus references) for pairs or 13 pages (plus references) for teams of three.</p>
<p><strong>The individual report</strong>: <em>(1 upload per student)</em> You will also submit a brief individual report (at most one page), which will: (1) Describe the parts of the project you worked on (which machine learning methods you applied, which preprocessing steps you performed on the data, which parts of the term paper you wrote, who you worked with on what parts, etc.) and what parts of the project your teammates worked on. (2) What you learned from the project. The purpose of the individual report is to facilitate fair grading and to allow the instructor to understand well what you learned from the project.</p>
<p>Project Report (30%)</p>
<ul>
<li>Clarity/Relevance of problem statement and description of approach: 10%</li>
<li>Discussion of relationship to previous work and references: 4%</li>
<li>Design and execution of experiments: 10% Figures/Tables/Writing: easily readable, properly labeled, * informative: 5%</li>
<li>Indiviual report: 1%</li>
</ul>
<section id="timeline" class="level4">
<h4 class="anchored" data-anchor-id="timeline">Timeline</h4>
<ul>
<li>Team Registration, due: <strong>October 1</strong>. Fill this <a href="https://forms.gle/DkNsrh8xpYyU1kAh6">form</a>.</li>
<li>Study plan, due: <strong>October 28</strong> (by the end of the day EDT).</li>
<li>Handing in: Through <em>ZoneCours</em></li>
<li>Project meeting, <strong>October 31</strong></li>
<li>Project Presentation, due: <strong>December 1</strong>. Upload the PDF of your poster/slides to <em>ZoneCours</em>.</li>
<li>In-class Presentation, on <strong>December 5</strong>.</li>
<li>Final individual report, due: <strong>December 15</strong>, 2023 (by the end of the day EDT).
<ul>
<li>Handing in: Through <em>ZoneCours</em> (per each team member).</li>
</ul></li>
</ul>
</section>
</section>
<section id="project-presentation-10" class="level3">
<h3 class="anchored" data-anchor-id="project-presentation-10">Project Presentation (10%)</h3>
<p>Make a poster that describes your project. You can think of a poster as supporting material for your oral presentation (in that way it is similar to slides). It could also follow a similar structure: begin by motivating your work, then (quickly) highlight related work, talk in depth about your solution, then go into results (pictures and tables are good tools for that), finally conclude and perhaps mention one or two ideas for future work.</p>
<ul>
<li>Project Presentation (10%)
<ul>
<li>Clarity of presentation: 3%</li>
<li>Slide or Poster quality: 2%</li>
<li>Correctness: 2%</li>
<li>Answers to questions: 3%</li>
</ul></li>
</ul>
</section>
<section id="final-exam-30" class="level3">
<h3 class="anchored" data-anchor-id="final-exam-30">Final Exam (30%)</h3>
<ul>
<li>Dec 14, 2023</li>
<li>9:00 am - 12:00 pm EDT</li>
<li>Location to be communicated</li>
</ul>
<p><a href="exam_80629_A18.pdf">Past exam - Fall 2018</a></p>
</section>
<section id="capsule-quizzes-10" class="level3">
<h3 class="anchored" data-anchor-id="capsule-quizzes-10">Capsule Quizzes (10%)</h3>
<ul>
<li>In-class quizzes of the capsules</li>
<li>Capsule quizzes are counted for 10% of your final grade.
<ul>
<li>Quiz 0, <strong>TBA</strong>.</li>
<li>Quiz 1, <strong>TBA</strong>.</li>
<li>Quiz 2, <strong>TBA</strong>.</li>
<li>Quiz 3, <strong>TBA</strong>.</li>
<li>Quiz 4, <strong>TBA</strong>.</li>
<li>Quiz 5, <strong>TBA</strong>.</li>
<li>Quiz 6, <strong>TBA</strong>.</li>
</ul></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>